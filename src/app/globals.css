@import "tailwindcss";

/* カスタムCSS */
@layer utilities {
  /* スムーズなスクロール */
  html {
    scroll-behavior: smooth;
  }

  /* タッチデバイスでのホバー効果を無効化 */
  @media (hover: none) {
    .hover\:shadow-lg:hover {
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
  }

  /* モバイルでのタップターゲットサイズを確保 */
  @media (max-width: 768px) {
    button, a {
      min-height: 44px;
      min-width: 44px;
    }
  }

  /* テーマ背景 */
  html[data-theme='dark'] body {
    background-image: linear-gradient(to bottom right, #0f172a, #1f2937, #0f172a);
    color: #fff;
  }
  html[data-theme='light'] body {
    background-image: linear-gradient(to bottom right, #ffffff, #eef2ff, #ffffff);
    color: #0f172a;
  }

  /* デザイントークン */
  html[data-theme='dark'] {
    --bg: #0f172a; /* slate-900 */
    --text: #e2e8f0; /* slate-200 */
    --muted: #94a3b8; /* slate-400 */
    --card: rgba(51, 65, 85, 0.5); /* slate-700/50 */
    --border: rgba(71, 85, 105, 0.3); /* slate-600/30 */
    --card-hover-border: rgba(100, 116, 139, 0.5); /* slate-500/50 */
    --primary: #fbbf24; /* amber-400 */
    --primary-contrast: #0b1220;
    --accent: #fb923c; /* orange-400 */
  }
  html[data-theme='light'] {
    --bg: #ffffff;
    --text: #0f172a; /* slate-900 */
    --muted: #475569; /* slate-600 */
    --card: rgba(255,255,255,0.9);
    --border: #e5e7eb; /* gray-200 */
    --card-hover-border: #d1d5db; /* gray-300 */
    --primary: #f59e0b; /* amber-500 */
    --primary-contrast: #ffffff;
    --accent: #f97316; /* orange-500 */
  }

  /* ヘッダー/フッターのテーマ反映（簡易） */
  html[data-theme='light'] header {
    background-color: rgba(255,255,255,0.9);
    color: #0f172a;
    border-color: #e5e7eb;
  }
  html[data-theme='light'] footer {
    background-color: rgba(255,255,255,0.9);
    color: #0f172a;
    border-color: #e5e7eb;
  }

  /* カスタムスクロールバー - ダーク/ライト対応 */
  ::-webkit-scrollbar {
    width: 12px;
  }

  ::-webkit-scrollbar-track {
    background: var(--scrollbar-track, #0f172a); /* slate-900 */
    border-radius: 6px;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb, linear-gradient(to bottom, #475569, #64748b));
    border-radius: 6px;
    border: 2px solid var(--scrollbar-track, #0f172a);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(to bottom, #64748b, #94a3b8); /* slate-500 to slate-400 */
  }

  ::-webkit-scrollbar-corner {
    background: #0f172a; /* slate-900 */
  }

  /* Firefox用スクロールバー */
  html { scrollbar-width: thin; }
  html[data-theme='dark'] { scrollbar-color: #475569 #0f172a; }
  html[data-theme='light'] { scrollbar-color: #94a3b8 #e5e7eb; }

  /* フォーカス表示の改善 - ボタンクリック後のフォーカス枠を非表示 */
  *:focus {
    outline: none;
  }

  /* キーボードナビゲーション用のフォーカス表示（アクセシビリティ維持） */
  *:focus-visible {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
  }

  /* ボタンとリンクのフォーカス状態を改善 */
  button:focus,
  a:focus,
  input:focus,
  textarea:focus,
  select:focus {
    outline: none;
  }

  /* ボタンクリック後のフォーカス状態をリセット */
  button:active:focus,
  button:focus:not(:focus-visible) {
    outline: none;
  }

  /* アニメーションの最適化 */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* ダークモード対応（将来の拡張用） */
@media (prefers-color-scheme: dark) {
  /* ダークモードのスタイルをここに追加 */
}

/* リッチテキストエディターの見出しスタイル（トークン対応） */
.rich-text-editor h1 {
  font-size: 2.25rem !important; /* text-4xl */
  font-weight: 700 !important; /* font-bold */
  line-height: 2.5rem !important; /* leading-10 */
  margin-top: 1.5rem !important; /* mt-6 */
  margin-bottom: 1rem !important; /* mb-4 */
  color: var(--text) !important;
  border-bottom: 2px solid var(--border) !important;
  padding-bottom: 0.5rem !important; /* pb-2 */
}

.rich-text-editor h2 {
  font-size: 1.875rem !important; /* text-3xl */
  font-weight: 600 !important; /* font-semibold */
  line-height: 2.25rem !important; /* leading-9 */
  margin-top: 1.25rem !important; /* mt-5 */
  margin-bottom: 0.75rem !important; /* mb-3 */
  color: var(--text) !important;
  border-bottom: 1px solid var(--border) !important;
  padding-bottom: 0.25rem !important; /* pb-1 */
}

.rich-text-editor h3 {
  font-size: 1.5rem !important; /* text-2xl */
  font-weight: 600 !important; /* font-semibold */
  line-height: 2rem !important; /* leading-8 */
  margin-top: 1rem !important; /* mt-4 */
  margin-bottom: 0.5rem !important; /* mb-2 */
  color: var(--text) !important;
}

.rich-text-editor h4 {
  font-size: 1.25rem !important; /* text-xl */
  font-weight: 600 !important; /* font-semibold */
  line-height: 1.75rem !important; /* leading-7 */
  margin-top: 0.75rem !important; /* mt-3 */
  margin-bottom: 0.5rem !important; /* mb-2 */
  color: var(--text) !important;
}

.rich-text-editor h5 {
  font-size: 1.125rem !important; /* text-lg */
  font-weight: 600 !important; /* font-semibold */
  line-height: 1.75rem !important; /* leading-7 */
  margin-top: 0.75rem !important; /* mt-3 */
  margin-bottom: 0.5rem !important; /* mb-2 */
  color: var(--text) !important;
}

.rich-text-editor h6 {
  font-size: 1rem !important; /* text-base */
  font-weight: 600 !important; /* font-semibold */
  line-height: 1.5rem !important; /* leading-6 */
  margin-top: 0.75rem !important; /* mt-3 */
  margin-bottom: 0.5rem !important; /* mb-2 */
  color: var(--text) !important;
}

/* エディター内の段落スタイル */
.rich-text-editor p {
  margin-top: 0.75rem !important; /* mt-3 */
  margin-bottom: 0.75rem !important; /* mb-3 */
  color: color-mix(in oklab, var(--text) 85%, transparent) !important;
  line-height: 1.75rem !important; /* leading-7 */
}

/* エディター内のリストスタイル */
.rich-text-editor ul,
.rich-text-editor ol {
  margin-top: 0.75rem !important; /* mt-3 */
  margin-bottom: 0.75rem !important; /* mb-3 */
  padding-left: 1.5rem !important; /* pl-6 */
  color: var(--text) !important;
}

.rich-text-editor li {
  margin-top: 0.25rem !important; /* mt-1 */
  margin-bottom: 0.25rem !important; /* mb-1 */
}

/* エディター内の引用スタイル */
.rich-text-editor blockquote {
  border-left: 4px solid var(--primary) !important;
  padding-left: 1rem !important; /* pl-4 */
  margin-top: 1rem !important; /* mt-4 */
  margin-bottom: 1rem !important; /* mb-4 */
  font-style: italic !important;
  color: color-mix(in oklab, var(--text) 70%, transparent) !important;
  background-color: color-mix(in oklab, var(--primary) 10%, transparent) !important;
  padding: 1rem !important; /* p-4 */
  border-radius: 0.5rem !important; /* rounded-lg */
}

/* エディター内のコードスタイル */
.rich-text-editor code {
  background-color: color-mix(in oklab, var(--bg) 85%, #64748b) !important;
  color: var(--text) !important;
  padding: 0.125rem 0.25rem !important; /* px-1 py-0.5 */
  border-radius: 0.25rem !important; /* rounded */
  font-family: ui-monospace, SFMono-Regular, "SF Mono", Consolas, "Liberation Mono", Menlo, monospace !important;
  font-size: 0.875rem !important; /* text-sm */
}

/* エディター内の太字・斜体スタイル */
.rich-text-editor strong {
  font-weight: 700 !important; /* font-bold */
  color: var(--text) !important;
}

.rich-text-editor em {
  font-style: italic !important;
  color: color-mix(in oklab, var(--text) 75%, transparent) !important;
}

/* エディター内の取り消し線スタイル */
.rich-text-editor s {
  text-decoration: line-through !important;
  color: color-mix(in oklab, var(--text) 60%, transparent) !important;
}

/* 記事詳細画面の表示スタイル（トークン対応） */
.rich-text-display h1 {
  font-size: 2.25rem !important; /* text-4xl */
  font-weight: 700 !important; /* font-bold */
  line-height: 2.5rem !important; /* leading-10 */
  margin-top: 1.5rem !important; /* mt-6 */
  margin-bottom: 1rem !important; /* mb-4 */
  color: var(--text) !important;
  border-bottom: 2px solid var(--border) !important;
  padding-bottom: 0.5rem !important; /* pb-2 */
}

.rich-text-display h2 {
  font-size: 1.875rem !important; /* text-3xl */
  font-weight: 600 !important; /* font-semibold */
  line-height: 2.25rem !important; /* leading-9 */
  margin-top: 1.25rem !important; /* mt-5 */
  margin-bottom: 0.75rem !important; /* mb-3 */
  color: var(--text) !important;
  border-bottom: 1px solid var(--border) !important;
  padding-bottom: 0.25rem !important; /* pb-1 */
}

.rich-text-display h3 {
  font-size: 1.5rem !important; /* text-2xl */
  font-weight: 600 !important; /* font-semibold */
  line-height: 2rem !important; /* leading-8 */
  margin-top: 1rem !important; /* mt-4 */
  margin-bottom: 0.5rem !important; /* mb-2 */
  color: var(--text) !important;
}

.rich-text-display h4 {
  font-size: 1.25rem !important; /* text-xl */
  font-weight: 600 !important; /* font-semibold */
  line-height: 1.75rem !important; /* leading-7 */
  margin-top: 0.75rem !important; /* mt-3 */
  margin-bottom: 0.5rem !important; /* mb-2 */
  color: var(--text) !important;
}

.rich-text-display h5 {
  font-size: 1.125rem !important; /* text-lg */
  font-weight: 600 !important; /* font-semibold */
  line-height: 1.75rem !important; /* leading-7 */
  margin-top: 0.75rem !important; /* mt-3 */
  margin-bottom: 0.5rem !important; /* mb-2 */
  color: var(--text) !important;
}

.rich-text-display h6 {
  font-size: 1rem !important; /* text-base */
  font-weight: 600 !important; /* font-semibold */
  line-height: 1.5rem !important; /* leading-6 */
  margin-top: 0.75rem !important; /* mt-3 */
  margin-bottom: 0.5rem !important; /* mb-2 */
  color: var(--text) !important;
}

/* 記事詳細画面の段落スタイル */
.rich-text-display p {
  margin-top: 0.75rem !important; /* mt-3 */
  margin-bottom: 0.75rem !important; /* mb-3 */
  color: color-mix(in oklab, var(--text) 85%, transparent) !important;
  line-height: 1.75rem !important; /* leading-7 */
}

/* 記事詳細画面のリストスタイル */
.rich-text-display ul,
.rich-text-display ol {
  margin-top: 0.75rem !important; /* mt-3 */
  margin-bottom: 0.75rem !important; /* mb-3 */
  padding-left: 1.5rem !important; /* pl-6 */
  color: var(--text) !important;
}

.rich-text-display li {
  margin-top: 0.25rem !important; /* mt-1 */
  margin-bottom: 0.25rem !important; /* mb-1 */
}

/* 記事詳細画面の引用スタイル */
.rich-text-display blockquote {
  border-left: 4px solid var(--primary) !important; /* border-l-4 */
  padding-left: 1rem !important; /* pl-4 */
  margin-top: 1rem !important; /* mt-4 */
  margin-bottom: 1rem !important; /* mb-4 */
  font-style: italic !important;
  color: color-mix(in oklab, var(--text) 70%, transparent) !important;
  background-color: color-mix(in oklab, var(--primary) 10%, transparent) !important;
  padding: 1rem !important; /* p-4 */
  border-radius: 0.5rem !important; /* rounded-lg */
}

/* 記事詳細画面のコードスタイル */
.rich-text-display code {
  background-color: color-mix(in oklab, var(--bg) 85%, #64748b) !important;
  color: var(--text) !important;
  padding: 0.125rem 0.25rem !important; /* px-1 py-0.5 */
  border-radius: 0.25rem !important; /* rounded */
  font-family: ui-monospace, SFMono-Regular, "SF Mono", Consolas, "Liberation Mono", Menlo, monospace !important;
  font-size: 0.875rem !important; /* text-sm */
}

/* 記事詳細画面の太字・斜体スタイル */
.rich-text-display strong {
  font-weight: 700 !important; /* font-bold */
  color: var(--text) !important;
}

.rich-text-display em {
  font-style: italic !important;
  color: color-mix(in oklab, var(--text) 75%, transparent) !important;
}

/* 記事詳細画面の取り消し線スタイル */
.rich-text-display s {
  text-decoration: line-through !important;
  color: color-mix(in oklab, var(--text) 60%, transparent) !important;
}
